

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Evaluation &mdash; Microscopy Nuclei 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2709fde1"></script>
      <script src="_static/doctools.js?v=888ff710"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Full pipeline" href="Pipeline.html" />
    <link rel="prev" title="HoVer-Net training" href="Train_HoVerNet.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Microscopy Nuclei
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Steps:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Environment.html">Conda Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="Environment.html#apptainer-container">Apptainer container</a></li>
<li class="toctree-l1"><a class="reference internal" href="Preprcoessing.html">Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="Train_UNet.html">U-Net training</a></li>
<li class="toctree-l1"><a class="reference internal" href="Train_HoVerNet.html">HoVer-Net training</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Evaluation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#u-net-evaluation">U-Net evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hover-net-evaluation">HoVer-Net evaluation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Pipeline.html">Full pipeline</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Microscopy Nuclei</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Evaluation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Evaluation.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="evaluation">
<h1>Evaluation<a class="headerlink" href="#evaluation" title="Link to this heading"></a></h1>
<p>For evaluating the models we have used validation and test sets from  <a class="reference external" href="https://www.sciencedirect.com/science/article/pii/S2352340922009726">Nuclei</a>.</p>
<p>We have compared two metrics as pixel-based Jaccard index and object-based F1-score where the threshold for comparing two objects are 90%.</p>
<p>The metrics that we have used for both architectures are Jaccard Index and F1-score where they both are defind based on Intersection over Union (IOU),
The IoU measures the overlap of predicted and annotated objects and is calculated according to the following equation:</p>
<div class="math notranslate nohighlight">
\[IOU(A,B) = \dfrac {A \cap B }{A\cup B}\]</div>
<p>IoU determines Jaccard Index as a pixel-based index that can range from 0 to 1, from no overlap to identical objects.
Since overlap of predicted and original objects is rarely 100% we selected a few different thresholds for comparison (50% to 90%). This is for calculating F1-score which is an object-based index. F1-score measures how many out of all predictions were true positives as the geometric average between the recall and precision.</p>
<section id="u-net-evaluation">
<h2>U-Net evaluation<a class="headerlink" href="#u-net-evaluation" title="Link to this heading"></a></h2>
<p>For evaluating U-Net models we have used our three best models as Model3, Model12, and Model14 where in the main manuscript we have mentioned
the different training sets that they were trained on.
The whole evaluation process of U-Net models are described in evaluation/UNet/UNET_concise_Evaluation.ipynb</p>
<p>The required functions are mostly taken from  <a class="reference external" href="https://github.com/carpenterlab/unet4nuclei.git">carpenterlab</a> repo and revised according to our models and data.
Besides, a classification of Tiny, Small, Normal and Large nuclei is also performed to see in which category the models work best.
Then Jaccard index were calculated based on IOU and then by assigning a threshold, F1-score were calculated.</p>
<p>The following table shows the results for each U-Net model on test set.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p>F1_score_90</p></th>
<th class="head"><p>Average Jaccard Index</p></th>
<th class="head"><p>False Discovery Rate</p></th>
<th class="head"><p>Precision</p></th>
<th class="head"><p>Recall</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>3</p></td>
<td><p>0.8099</p></td>
<td><p>0.87</p></td>
<td><p>0.066</p></td>
<td><p>0.934</p></td>
<td><p>0.729</p></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>0.8061</p></td>
<td><p>0.88</p></td>
<td><p>0.038</p></td>
<td><p>0.962</p></td>
<td><p>0.702</p></td>
</tr>
<tr class="row-even"><td><p>14</p></td>
<td><p>0.8461</p></td>
<td><p>0.88</p></td>
<td><p>0.063</p></td>
<td><p>0.937</p></td>
<td><p>0.766</p></td>
</tr>
</tbody>
</table>
</section>
<section id="hover-net-evaluation">
<h2>HoVer-Net evaluation<a class="headerlink" href="#hover-net-evaluation" title="Link to this heading"></a></h2>
<p>For evaluting the performnace of HoVer-Net models on validation and test set (same as UNet from <a class="reference external" href="https://www.sciencedirect.com/science/article/pii/S2352340922009726">Nuclei</a>)
we have used loadmat function from scipy.io python library and then we compared the “inst_map” feature of “.mat” files as predicted masks to be able to compare to gold annotated segmentation masks.</p>
<p>Same as UNet evaluation process, small objects (minsize = 25) were removed during comparison.
The whole evaluation process of HoVer-Net models are described in evaluation/HoVerNet/HoverNet_concise_evaluation.ipynb.</p>
<p>The following table shows the results for the best three top models of  HoVer-Net architecture valiadated on test set.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p>F1_score_90</p></th>
<th class="head"><p>Average Jaccard Index</p></th>
<th class="head"><p>False Discovery Rate</p></th>
<th class="head"><p>Precision</p></th>
<th class="head"><p>Recall</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>17</p></td>
<td><p>0.7551</p></td>
<td><p>0.83</p></td>
<td><p>0.110</p></td>
<td><p>0.890</p></td>
<td><p>0.688</p></td>
</tr>
<tr class="row-odd"><td><p>23</p></td>
<td><p>0.7487</p></td>
<td><p>0.82</p></td>
<td><p>0.128</p></td>
<td><p>0.872</p></td>
<td><p>0.690</p></td>
</tr>
<tr class="row-even"><td><p>37</p></td>
<td><p>0.7725</p></td>
<td><p>0.83</p></td>
<td><p>0.109</p></td>
<td><p>0.891</p></td>
<td><p>0.711</p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Train_HoVerNet.html" class="btn btn-neutral float-left" title="HoVer-Net training" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Pipeline.html" class="btn btn-neutral float-right" title="Full pipeline" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>